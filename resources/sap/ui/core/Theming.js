/*!
 * copyright
 */
sap.ui.define(["sap/base/assert","sap/base/config","sap/base/Event","sap/base/Eventing","sap/base/Log","sap/base/i18n/Localization","sap/base/util/deepEqual","sap/ui/core/theming/ThemeHelper"],function(e,t,a,n,i,r,o,s){"use strict";var h=t.getWritableInstance();var f;var l;var c={getTheme:function(){var e=h.get({name:"sapTheme",type:h.Type.String,defaultValue:h.get({name:"sapUiTheme",type:h.Type.String,external:true}),external:true});if(e===""){const t=s.getDefaultThemeInfo();e=`${t.DEFAULT_THEME}${t.DARK_MODE?"_dark":""}`}var t=e.indexOf("@");if(t>=0){var a=d(e.slice(t+1));e=t>0?e.slice(0,t):e;if(a!==c.getThemeRoot(e)){c.setThemeRoot(e,a)}}e=s.validateAndFallbackTheme(e,c.getThemeRoot(e));return e},setTheme:function(e){if(e){if(e.indexOf("@")!==-1){throw new TypeError("Providing a theme root as part of the theme parameter is not allowed.")}var t=!f;f=f||{};var a=c.getTheme();h.set("sapTheme",e);var n=c.getTheme();var i=a!==n;if(i){f.theme={new:n,old:a}}else{f=undefined}if(t){g(f)}if(!l&&i){m({theme:n})}}return this},getThemeRoot:function(e,t){var a=h.get({name:"sapUiThemeRoots",type:h.Type.Object});var n;e=e||c.getTheme();if(a[e]&&typeof a[e]==="string"){n=a[e]}else if(a[e]&&typeof a[e]==="object"){n=a[e][t]||a[e][""]}return n},setThemeRoot:function(t,a,n,i){e(typeof t==="string","sThemeName must be a string");e(typeof a==="string","sThemeBaseUrl must be a string");var r=!f;f=f||{};var s={name:"sapUiThemeRoots",type:h.Type.Object};var l=h.get(Object.assign(s,{defaultValue:{}}));var m=h.get(Object.assign(s,{defaultValue:{}}));if(typeof n==="boolean"){i=n;n=undefined}m[t]=m[t]||{};if(typeof m[t]==="string"){m[t]={"":m[t]};l[t]={"":l[t]}}if(n){for(var p=0;p<n.length;p++){var d=n[p];m[t][d]=a}}else{m[t][""]=a}if(!o(l,m)){h.set("sapUiThemeRoots",m);if(n){f.themeRoots={new:Object.assign({},m[t]),old:Object.assign({},l[t])}}else{f.themeRoots={new:a,old:l[t]&&l[t][""]}}f.themeRoots.forceUpdate=i&&t===c.getTheme()}else{f=undefined}if(r){g()}},attachAppliedOnce:function(e){var t="applied";if(l){if(l.themeLoaded){e.call(c,new a(t,c,{theme:c.getTheme()}))}else{c.attachEventOnce(t,e)}}else{e.call(c,new a(t,c,{theme:c.getTheme()}))}},attachApplied:function(e){var t="applied";c.attachEvent(t,e);if(l){if(l.themeLoaded){e.call(c,new a(t,c,{theme:c.getTheme()}))}}else{e.call(c,new a(t,c,{theme:c.getTheme()}))}},detachApplied:function(e){c.detachEvent("applied",e)},attachChange:function(e){c.attachEvent("change",e)},detachChange:function(e){c.detachEvent("change",e)},notifyContentDensityChanged:function(){m({theme:c.getTheme()})},registerThemeManager:function(e){l=e;l.attachEvent("ThemeChanged",function(e){m(a.getParameters(e))});r.attachChange(function(e){var t=e.rtl;if(t!==undefined){l._updateThemeUrls(c.getTheme())}})}};function g(){if(f){c.fireEvent("change",f);f=undefined}}function m(e){c.fireEvent("applied",e)}function p(e,t){var a=h.get({name:"sapAllowedThemeOrigins",type:h.Type.String});return!!a&&a.split(",").some(function(a){try{a=t&&!a.startsWith("//")?"//"+a:a;return a==="*"||e===new URL(a.trim(),globalThis.location.href).origin}catch(e){i.error("sapAllowedThemeOrigin provides invalid theme origin: "+a);return false}})}function d(e){var t=e.startsWith("//"),a,n;try{a=new URL(e,globalThis.location.href);a.search="";if(a.origin&&p(a.origin,t)){n=a.toString()}else{a=new URL(a.pathname,globalThis.location.href);n=a.toString()}if(t){n=n.replace(a.protocol,"")}return n+(n.endsWith("/")?"":"/")+"UI5/"}catch(e){}}n.apply(c);return c});
//# sourceMappingURL=Theming.js.map